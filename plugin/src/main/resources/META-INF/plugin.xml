<!--
  - Copyright 2013-2019 consulo.io
  -
  - Licensed under the Apache License, Version 2.0 (the "License");
  - you may not use this file except in compliance with the License.
  - You may obtain a copy of the License at
  -
  - http://www.apache.org/licenses/LICENSE-2.0
  -
  - Unless required by applicable law or agreed to in writing, software
  - distributed under the License is distributed on an "AS IS" BASIS,
  - WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  - See the License for the specific language governing permissions and
  - limitations under the License.
  -->

<consulo-plugin url="https://github.com/consulo/consulo-javascript">
	<id>consulo.javascript</id>
	<name>JavaScript</name>
	<version>SNAPSHOT</version>
	<category>Custom Languages</category>
	<vendor>JetBrains &amp; consulo.io</vendor>
	<resource-bundle>messages.JavaScriptBundle</resource-bundle>
	<depends>com.intellij.xml</depends>
	<depends optional="true">com.intellij.regexp</depends>
	<tags>
		<tag>custom.language</tag>
	</tags>

	<import path="/META-INF/Intentions.xml"/>
	<import path="/META-INF/json.xml"/>
	<import path="/META-INF/ecma4.xml"/>
	<import path="/META-INF/ecma6.xml"/>
	<import path="/META-INF/actionscript.xml"/>
	<import path="/META-INF/typescript.xml"/>
	<import path="/META-INF/jsx.xml"/>

	<actions>
		<action id="JavaScript.File" class="consulo.javascript.impl.ide.actions.JavaScriptCreateFileAction">
			<add-to-group group-id="NewGroup1" anchor="after" relative-to-action="NewClass"/>
		</action>
	</actions>

	<extensions defaultExtensionNs="com.intellij">
		<internalFileTemplate name="JavaScriptFile"/>

		<applicationService serviceInterface="consulo.javascript.language.StandardJavaScriptVersions" serviceImplementation="consulo.javascript.lang.StandardJavaScriptVersionsImpl"/>


		<lang.defineVersion language="JavaScript" implementationClass="consulo.javascript.lang.JavaScript15LanguageVersion"/>
		<lang.defineVersion language="JavaScript" implementationClass="consulo.javascript.javascript16.lang.JavaScript16LanguageVersion"/>
		<lang.defineVersion language="JavaScript" implementationClass="consulo.javascript.javascript17.lang.JavaScript17LanguageVersion"/>
		<lang.defineVersion language="JavaScript" implementationClass="consulo.javascript.javascript18.lang.JavaScript18LanguageVersion"/>
		<lang.defineVersion language="JavaScript" implementationClass="consulo.javascript.javascript18.lang.JavaScript185LanguageVersion"/>


		<gotoClassContributor implementation="consulo.javascript.impl.lang.navigation.JavaScriptClassContributor"/>
		<gotoSymbolContributor implementation="com.intellij.lang.javascript.impl.navigation.JavaScriptSymbolContributor"/>


		<annotator language="JavaScript" implementationClass="com.intellij.lang.javascript.impl.validation.JSAnnotatingVisitor"/>
		<readWriteAccessDetector implementation="com.intellij.lang.javascript.impl.findUsages.JSReadWriteAccessDetector"/>
		<lang.refactoringSupport language="JavaScript"
								 implementationClass="com.intellij.lang.javascript.impl.refactoring.JavascriptRefactoringSupportProvider"/>
		<lang.documentationProvider language="JavaScript" implementationClass="com.intellij.javascript.documentation.JSDocumentationProvider"/>

		<lang.namesValidator language="JavaScript" implementationClass="com.intellij.lang.javascript.impl.refactoring.BasicJavascriptNamesValidator"/>

		<lang.surroundDescriptor language="JavaScript"
								 implementationClass="com.intellij.lang.javascript.impl.surroundWith.JSExpressionSurroundDescriptor"/>
		<lang.surroundDescriptor language="JavaScript"
								 implementationClass="com.intellij.lang.javascript.impl.surroundWith.JSStatementsSurroundDescriptor"/>

		<codeInsight.gotoSuper language="JavaScript" implementationClass="com.intellij.lang.javascript.impl.navigation.JavaScriptGotoSuperHandler"/>
		<codeInsight.overrideMethod language="JavaScript"
									implementationClass="com.intellij.lang.javascript.impl.generation.JavaScriptOverrideMethodsHandler"/>
		<codeInsight.implementMethod language="JavaScript"
									 implementationClass="com.intellij.lang.javascript.impl.generation.JavaScriptImplementMethodsHandler"/>

		<lang.findUsagesProvider language="JavaScript" implementationClass="com.intellij.lang.javascript.impl.findUsages.JavaScriptFindUsagesProvider"/>

		<lang.syntaxHighlighterFactory language="JavaScript"
									   implementationClass="consulo.javascript.ide.hightlight.JavaScriptSyntaxHighlightFactory"/>
		<lang.commenter language="JavaScript" implementationClass="com.intellij.lang.javascript.impl.JavascriptCommenter"/>

		<lang.braceMatcher language="JavaScript" implementationClass="com.intellij.lang.javascript.impl.highlighting.JSBraceMatcher"/>

		<lang.foldingBuilder language="JavaScript" implementationClass="com.intellij.lang.javascript.impl.folding.JavaScriptFoldingBuilder"/>
		<lang.psiStructureViewFactory language="JavaScript"
									  implementationClass="com.intellij.lang.javascript.impl.structureView.JSStructureViewBuilderFactory"/>

		<codeInsight.parameterInfo language="JavaScript" implementationClass="com.intellij.javascript.JSParameterInfoHandler"/>
		<fileStructureGroupRuleProvider implementation="com.intellij.lang.javascript.impl.findUsages.JavaScriptClassGroupRuleProvider"/>
		<fileStructureGroupRuleProvider implementation="com.intellij.lang.javascript.impl.findUsages.JavaScriptFunctionGroupRuleProvider"/>

		<stubIndex implementation="consulo.javascript.language.psi.stub.JSNameIndex"/>
		<stubIndex implementation="consulo.javascript.impl.language.psi.stub.JavaScriptClassNameIndex"/>
		<stubIndex implementation="consulo.javascript.language.psi.stub.JSQualifiedElementIndex"/>
		<stubIndex implementation="consulo.javascript.language.psi.stub.JSSuperClassIndex"/>
		<stubIndex implementation="consulo.javascript.language.psi.stub.JSImplementedInterfacesIndex"/>

		<fileTypeIndentOptionsProvider implementation="com.intellij.lang.javascript.impl.formatter.JavaScriptIndentOptionsProvider"/>
		<codeStyleSettingsProvider implementation="com.intellij.lang.javascript.impl.formatter.JSCodeStyleSettingsProvider"/>
		<langCodeStyleSettingsProvider implementation="consulo.javascript.impl.formatter.JavaScriptLanguageCodeStyleSettingsProvider"/>
		<liveTemplateContext implementation="com.intellij.lang.javascript.impl.JavaScriptCodeContextType"/>

		<codeInsight.lineMarkerProvider language="JavaScript"
										implementationClass="com.intellij.lang.javascript.impl.highlighting.JavaScriptLineMarkerProvider"/>
		<gotoTargetRendererProvider implementation="com.intellij.lang.javascript.impl.search.JSGotoTargetRendererProvider"/>
		<definitionsScopedSearch implementation="com.intellij.lang.javascript.search.JSDefinitionsSearchExecutor"/>
		<referencesSearch implementation="com.intellij.lang.javascript.impl.search.JSReferencesSearchExecutor"/>
		<declarationRangeHandler key="com.intellij.lang.javascript.psi.JSNamedElement"
								 implementationClass="com.intellij.lang.javascript.impl.search.JSDeclarationRangeHandler"/>
		<multiHostInjector forClass="com.intellij.psi.xml.XmlText" implementationClass="com.intellij.lang.javascript.JSLanguageInjector"/>
		<multiHostInjector forClass="com.intellij.psi.xml.XmlAttributeValue" implementationClass="com.intellij.lang.javascript.JSLanguageInjector"/>
		<stubElementTypeHolder class="com.intellij.lang.javascript.JSElementTypes"/>


		<lang.elementManipulator forClass="com.intellij.lang.javascript.psi.impl.JSIncludeDirectiveImpl"
								 implementationClass="com.intellij.javascript.manipulators.JSIncludeDirectiveManipulator"/>
		<lang.elementManipulator forClass="com.intellij.lang.javascript.psi.JSAttributeNameValuePair"
								 implementationClass="com.intellij.javascript.manipulators.JSAttributeNameValuePairManipulator"/>


		<lang.fileViewProviderFactory language="JavaScript" implementationClass="consulo.javascript.lang.viewProvider.JSFileViewProviderFactory"/>

		<completion.contributor language="JavaScript" implementationClass="consulo.javascript.impl.ide.completion.JavaScriptKeywordCompletionContributor"/>

		<completion.confidence language="JavaScript" implementationClass="consulo.language.editor.completion.SkipAutopopupInStrings"/>

		<quoteHandler fileType="JavaScript" className="consulo.javascript.impl.lang.JavaScriptQuoteHandler"/>

		<liveTemplateMacro implementation="com.intellij.javascript.JSClassNameMacro"/>
		<liveTemplateMacro implementation="com.intellij.javascript.JSMethodNameMacro"/>


		<moduleExtensionProvider key="client-javascript"
								 icon="consulo.javascript.JavaScriptIconGroup@javascript"
								 name="JavaScript (Client)"
								 allowMixin="true"
								 immutableClass="consulo.javascript.client.module.extension.ClientJavaScriptModuleExtension"
								 mutableClass="consulo.javascript.client.module.extension.ClientJavaScriptMutableModuleExtension"/>

	</extensions>

	<extensionPoints>
		<extensionPoint name="indexer" interface="consulo.javascript.index.JavaScriptIndexer"/>

		<extensionPoint name="keywordCompletionExtender" interface="consulo.javascript.ide.completion.JavaScriptKeywordCompletionExtender"/>

		<extensionPoint name="resolveHelper" interface="com.intellij.lang.javascript.flex.JSResolveHelper"/>
		<extensionPoint name="classInheritorsProvider" interface="com.intellij.lang.javascript.search.JSClassInheritorsProvider"/>

		<extensionPoint name="propertyNameReferenceProvider" interface="consulo.javascript.psi.impl.reference.JSPropertyNameReferenceProvider"/>

		<extensionPoint name="quickFixFactory" beanClass="com.intellij.util.KeyedLazyInstanceEP">
			<with attribute="implementationClass" implements="consulo.javascript.ide.codeInsight.JavaScriptQuickFixFactory"/>
		</extensionPoint>
	</extensionPoints>

	<extensions defaultExtensionNs="consulo.javascript">
		<propertyNameReferenceProvider implementation="consulo.javascript.impl.psi.impl.reference.DefaultJSPropertyNameReferenceProvider" id="default"/>
	</extensions>

	<actions>
		<action id="Generate.GetAccessor.Actionscript" class="com.intellij.lang.javascript.impl.generation.JavaScriptGenerateGetAccessorAction"
				text="Getter">
			<add-to-group anchor="last" group-id="GenerateGroup"/>
		</action>
		<action id="Generate.SetAccessor.Actionscript" class="com.intellij.lang.javascript.impl.generation.JavaScriptGenerateSetAccessorAction"
				text="Setter">
			<add-to-group anchor="last" group-id="GenerateGroup"/>
		</action>
		<action id="Generate.GetSetAccessor.Actionscript" class="com.intellij.lang.javascript.impl.generation.JavaScriptGenerateGetSetAccessorAction"
				text="Getter and Setter">
			<add-to-group anchor="last" group-id="GenerateGroup"/>
		</action>
		<action id="Generate.Constructor.Actionscript" class="com.intellij.lang.javascript.impl.generation.JavaScriptGenerateConstructorAction"
				text="Constructor">
			<add-to-group anchor="last" group-id="GenerateGroup"/>
		</action>
		<action id="Generate.ToString.Actionscript" class="com.intellij.lang.javascript.impl.generation.JavaScriptGenerateToStringAction"
				text="toString() member function">
			<add-to-group anchor="last" group-id="GenerateGroup"/>
		</action>
	</actions>
</consulo-plugin>
